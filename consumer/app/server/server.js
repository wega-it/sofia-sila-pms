//=========================================================================
// Copyright (c) 2015 wega Informatik AG | Erick Bastidas
//
// This file is part of SOFIA.
//
// SOFIA is free software: you can redistribute it and/or modify it under 
// the terms of the GNU General Public License as published by the 
// Free Software Foundation, either version 3 of the License, or (at your 
// option) any later version.
//
// SOFIA is distributed in the hope that it will be useful, but WITHOUT 
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or 
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public 
// License for more details.
//
// You should have received a copy of the GNU General Public License 
// along with SOFIA. If not, see <http://www.gnu.org/licenses/>.
//
//======================================================
// Copyright details
//======================================================
//   Company: wega Informatik AG
//   Address: Aeschengraben 20, 4051 Basel, Switzerland
//   Website: http://www.wega-it.com
//   Author: Erick Bastidas
//   Email: ebastidas3@gmail.com
//=========================================================================


Meteor.startup(function() {
	// read environment variables from Meteor.settings
	if(Meteor.settings && Meteor.settings.env && _.isObject(Meteor.settings.env)) {
		for(var variableName in Meteor.settings.env) {
			process.env[variableName] = Meteor.settings.env[variableName];
		}
	}

	//Add initial documents to the database if empty
	if(!CommonCommandSet.find().count()) {
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Abort","parameters":"-","returnValues":"","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"DoContinue","parameters":"-","returnValues":"","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GetDeviceIdentification","parameters":"-","returnValues":"deviceDescription","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GetStatus","parameters":"deviceId,state,subStates,locked,PMSId,currentTime","returnValues":"","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Initialize","parameters":"-","returnValues":"","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"LockDevice","parameters":"lockTimeout,eventReceiverURI,PMSId","returnValues":"","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Pause","parameters":"-","returnValues":"","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Reset","parameters":"deviceId,eventReceiverURI,PMSId,errorHandlingTimeout,simulationMode","returnValues":"","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"UnlockDevice","parameters":"-","returnValues":"","0":"M","1":"M","2":"M","3":"M","4":"M","5":"M","6":"M","7":"M","8":"M","9":"M","10":"M","11":"M","12":"M","13":"M","14":"M","15":"M","16":"M","17":"M","18":"M","19":"M","20":"M","21":"M","22":"M","23":"M","24":"M","25":"M","26":"M","27":"M","28":"M","29":"M","30":"M","31":"M","901":"M","902":"M","903":"M","1000":"M"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ActivateStopper","parameters":"position","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"O","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"AddLid","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"R","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Aspirate","parameters":"volume","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"R","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"AttachStack","parameters":"stackNumber","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"O","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"CalculateComplexPosition","parameters":"position","returnValues":"array of int","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"O","8":"O","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"CalculatePositionID","parameters":"array of int","returnValues":"position","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"O","8":"O","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Cap","parameters":"position","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"R","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"CloseDoor","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"O","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"O","18":"","19":"O","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"CloseGripper","parameters":"-","returnValues":"","0":"","1":"","2":"O","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"O","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Decap","parameters":"position","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"R","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Delay","parameters":"duration","returnValues":"","0":"R","1":"R","2":"R","3":"R","4":"R","5":"R","6":"R","7":"R","8":"R","9":"R","10":"R","11":"R","12":"R","13":"R","14":"R","15":"R","16":"R","17":"R","18":"R","19":"R","20":"R","21":"R","22":"R","23":"R","24":"R","25":"R","26":"R","27":"R","28":"R","29":"R","30":"R","31":"R","901":"R","902":"R","903":"R","1000":"R"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Dispense","parameters":"volume","returnValues":"","0":"","1":"R","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"R","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"DispenseByColumn","parameters":"volume,startColumn, endColumn","returnValues":"","0":"","1":"O","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"DownStack","parameters":"stackNumber","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"R","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"EjectTip","parameters":"tipNumber","returnValues":"","0":"","1":"","2":"O","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"EmptyTubes","parameters":"volume","returnValues":"","0":"","1":"O","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Evaporate","parameters":"temperature, pressure, duration","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"R","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ExecuteMethod","parameters":"methodName, priority","returnValues":"dataXML","0":"","1":"","2":"O","3":"O","4":"O","5":"O","6":"O","7":"O","8":"O","9":"","10":"","11":"","12":"","13":"O","14":"","15":"","16":"","17":"","18":"O","19":"O","20":"O","21":"O","22":"","23":"","24":"O","25":"O","26":"","27":"","28":"O","29":"O","30":"O","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GetConfiguration","parameters":"configLevel, password","returnValues":"configXML","0":"O","1":"O","2":"O","3":"O","4":"O","5":"O","6":"O","7":"O","8":"O","9":"O","10":"O","11":"O","12":"O","13":"O","14":"O","15":"O","16":"O","17":"O","18":"O","19":"O","20":"O","21":"O","22":"O","23":"O","24":"O","25":"O","26":"O","27":"O","28":"O","29":"O","30":"O","31":"O","901":"O","902":"O","903":"O","1000":"O"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GetInventory","parameters":"inventoryStart,inventoryStop","returnValues":"inventory","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"O","8":"O","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GetLabware","parameters":"positionNumber,backToJoint,labwareType","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"R","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GetParameters","parameters":"","returnValues":"paramsXML","0":"R","1":"R","2":"R","3":"R","4":"R","5":"R","6":"R","7":"R","8":"R","9":"R","10":"R","11":"R","12":"R","13":"R","14":"R","15":"R","16":"R","17":"R","18":"R","19":"R","20":"R","21":"R","22":"R","23":"R","24":"R","25":"R","26":"R","27":"R","28":"R","29":"R","30":"R","31":"R","901":"R","902":"R","903":"R","1000":"R"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GetTemperature","parameters":"xx","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":" ","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GetTip","parameters":"tipNumber","returnValues":"","0":"","1":"","2":"O","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"GoToValvePosition","parameters":"index,direction","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"O","23":"R","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"LabwareDelivered","parameters":"xx","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":" ","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":" ","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"LabwareRemoved","parameters":"xx","returnValues":"xx","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":" ","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Home","parameters":"index","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"R","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"R","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"MeasureSample","parameters":"-","returnValues":"dataXML","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"O","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"MoveAbsolute","parameters":"position","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"R","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"MoveEndless","parameters":"direction","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"R","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"O","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"MoveLabware","parameters":"fromPositionNumber, toPositionNumber, backToJoint, labwareType","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"R","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"MoveToPosition","parameters":"positionNumber","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"R","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"OpenDoor","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"O","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"O","18":"","19":"O","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"OpenGripper","parameters":"-","returnValues":"","0":"","1":"","2":"O","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"O","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Peel","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"R","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Pierce","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"R","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"PrepareForInput","parameters":"position","returnValues":"","0":"O","1":"R","2":"R","3":"R","4":"R","5":"R","6":"R","7":"O","8":"O","9":"R","10":"R","11":"R","12":"R","13":"R","14":"O","15":"R","16":"","17":"R","18":"","19":"","20":"","21":"R","22":"","23":"","24":"O","25":"O","26":"","27":"","28":"R","29":"R","30":"R","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"PrepareForOutput","parameters":"position","returnValues":"","0":"O","1":"R","2":"R","3":"R","4":"R","5":"R","6":"R","7":"O","8":"O","9":"R","10":"R","11":"R","12":"R","13":"R","14":"O","15":"R","16":"","17":"R","18":"","19":"","20":"","21":"R","22":"","23":"","24":"O","25":"O","26":"","27":"","28":"R","29":"R","30":"R","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Prime","parameters":"volume,liquid","returnValues":"","0":"","1":"R","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Pump","parameters":"","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"PutLabware","parameters":"positionNumber,backToJoint,labwareType","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"R","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadAllAnalogInputs","parameters":"-","returnValues":"values","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":" R","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadAllDigitalInputs","parameters":"-","returnValues":"values","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"O","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadAnalogInput","parameters":"index","returnValues":"value","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"R","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadCode","parameters":"-","returnValues":"code","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"R","15":"","16":"R","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadMultipleCodes","parameters":"","returnValues":"CodelistXML","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"O","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadDigitalInput","parameters":"index","returnValues":"value","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"R","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadNamedAnalogInput","parameters":"-","returnValues":"values","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":" R","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadNamedDigitalInput","parameters":"-","returnValues":"values","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"O","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadPlate","parameters":"index","returnValues":"dataXML","0":"","1":"","2":"","3":"","4":"O","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReadWell","parameters":"index","returnValues":"dataXML","0":"","1":"","2":"","3":"","4":"O","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"RegisterStatusEventURL","parameters":"eventReceiverURI,statusEventInterval","returnValues":"","0":"O","1":"O","2":"O","3":"O","4":"O","5":"O","6":"O","7":"O","8":"O","9":"O","10":"O","11":"O","12":"O","13":"O","14":"O","15":"O","16":"O","17":"O","18":"O","19":"O","20":"O","21":"O","22":"O","23":"O","24":"O","25":"O","26":"O","27":"O","28":"O","29":"O","30":"O","31":"O","901":"O","902":"O","903":"O","1000":"O"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ReleaseStack","parameters":"stackNumber","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"O","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"RemoveLid","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"R","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ResetDigitalOutput","parameters":"index,value","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"R","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ResetNamedDigitalOutput","parameters":"index,value","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"R","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"RetrieveByPositionId","parameters":"position, labwareType","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"R","8":"R","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"RetrieveByLabwareIdentifier","parameters":"labwareIdentifier, labwareType","returnValues":"positionId","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"O","8":"O","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Rinse","parameters":"cycles,volume","returnValues":"","0":"","1":"O","2":"","3":"O","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"ScanInventory","parameters":"xx","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Seal","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"R","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetAnalogOutput","parameters":"value","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"R","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetConfiguration","parameters":"configLevel, password,configXML","returnValues":"","0":"O","1":"O","2":"O","3":"O","4":"O","5":"O","6":"O","7":"O","8":"O","9":"O","10":"O","11":"O","12":"O","13":"O","14":"O","15":"O","16":"O","17":"O","18":"O","19":"O","20":"O","21":"O","22":"O","23":"O","24":"O","25":"O","26":"O","27":"O","28":"O","29":"O","30":"O","31":"O","901":"O","902":"O","903":"O","1000":"O"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetDigitalOutput","parameters":"index,value","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"R","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetNamedAnalogOutput","parameters":"value","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"R","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetNamedDigitalOutput","parameters":"index,value","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"R","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetLanguage","parameters":"Language-Enum","returnValues":"","0":"O","1":"O","2":"O","3":"O","4":"O","5":"O","6":"O","7":"O","8":"O","9":"O","10":"O","11":"O","12":"O","13":"O","14":"O","15":"O","16":"O","17":"O","18":"O","19":"O","20":"O","21":"O","22":"O","23":"O","24":"O","25":"O","26":"O","27":"O","28":"O","29":"O","30":"O","31":"O","901":"O","902":"O","903":"O","1000":"O"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetParameters","parameters":"paramsXML","returnValues":"","0":"O","1":"R","2":"R","3":"R","4":"R","5":"R","6":"R","7":"R","8":"R","9":"R","10":"R","11":"R","12":"R","13":"R","14":"R","15":"R","16":"R","17":"R","18":"R","19":"R","20":"R","21":"R","22":"R","23":"R","24":"R","25":"R","26":"R","27":"R","28":"R","29":"R","30":"R","31":"R","901":"R","902":"R","903":"R","1000":"R"});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetTag","parameters":"tagsXML","returnValues":"","0":"","1":"","2":"","3":"","4":"O","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"SetTemperature","parameters":"xx","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Shake","parameters":"duration","returnValues":"","0":"","1":"O","2":"","3":"O","4":"","5":"R","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Spin","parameters":"duration","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"R","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"StartTempControl","parameters":"temperature, waitForCompletion","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"R","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"StopMethod","parameters":"xx","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"StopMotion","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"O","19":"O","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"O","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"StopTemperatureControl","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"O","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"StoreAtPosition","parameters":"position,labwareType","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"R","8":"R","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"StoreImage","parameters":"filename","returnValues":"","0":"","1":"","2":"","3":"","4":"O","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"R","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"StoreImageSeries","parameters":"filename,interval,counterStart,counterEnd","returnValues":"","0":"","1":"","2":"","3":"","4":"O","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"O","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Tare","parameters":"-","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"R","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"TeachPosition","parameters":"PositionNumber","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"O","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"TransferLiquid","parameters":"volume, source, destination","returnValues":"","0":"","1":"","2":"O","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"R","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"TransferTube","parameters":"fromPosition,toPosition","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"R","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"UnRegisterStatusEventReceiver","parameters":"xx","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"UpStack","parameters":"stackNumber","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"R","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Wash","parameters":"index","returnValues":"","0":"","1":"","2":"O","3":"R","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"Weigh","parameters":"-","returnValues":"weight","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"R","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"WriteCode","parameters":"code","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"R","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
		CommonCommandSet.insert({"deviceClassVersion":0.97,"name":"WriteCodeSeries","parameters":"prefix, suffix, codeLenght, rangeStart, rangeEnd","returnValues":"","0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"","12":"","13":"","14":"","15":"O","16":"","17":"","18":"","19":"","20":"","21":"","22":"","23":"","24":"","25":"","26":"","27":"","28":"","29":"","30":"","31":"","901":"","902":"","903":"","1000":""});
	}

});

Meteor.methods({
	  "connectDeviceSoap": function(url, operation, args) {

		var soap = Meteor.npmRequire('soap');	  	
	  	
		//declare an async function
		function delayedSoapRequest(callback) {
  			setTimeout(function() {
			soap.createClient(url, function(err, client) {
				if(!err){
		      			client[operation](args, function(err, soapResult) {
						if(!err){
							//console.log("connectDeviceSoap " + JSON.stringify(soapResult, null, 4));
							callback(null, soapResult);
						}else{callback(err);}		
		     			});
				}else{callback(err);}
			});
  			}, Meteor.settings.private.SOAPdelayTime);//delay for simulation - see the "Connecting..." message //TODO: Delete in production
		}

		//wrapping async for Meteor (that works sync only)
		var wrappedDelayedSoapRequest = Meteor.wrapAsync(delayedSoapRequest);

    		var response = wrappedDelayedSoapRequest();
    		return response;
  	},
	"createUserAccount": function(options) {
		if(!Users.isAdmin(Meteor.userId())) {
			throw new Meteor.Error(403, "Access denied.");
		}

		var userOptions = {};		
		if(options.username) userOptions.username = options.username;
		if(options.email) userOptions.email = options.email;
		if(options.password) userOptions.password = options.password;
		if(options.profile) userOptions.profile = options.profile;
		if(options.profile && options.profile.email) userOptions.email = options.profile.email;

		Accounts.createUser(userOptions);
	},
	"updateUserAccount": function(userId, options) {
		// only admin or users own profile
		if(!(Users.isAdmin(Meteor.userId()) || userId == Meteor.userId())) {
			throw new Meteor.Error(403, "Access denied.");
		}

		// non-admin user can change only profile
		if(!Users.isAdmin(Meteor.userId())) {
			var keys = Object.keys(options);
			if(keys.length !== 1 || !options.profile) {
				throw new Meteor.Error(403, "Access denied.");
			}
		}

		var userOptions = {};		
		if(options.username) userOptions.username = options.username;
		if(options.email) userOptions.email = options.email;
		if(options.password) userOptions.password = options.password;
		if(options.profile) userOptions.profile = options.profile;

		if(options.profile && options.profile.email) userOptions.email = options.profile.email;
		if(options.roles) userOptions.roles = options.roles;

		if(userOptions.email) {
			var email = userOptions.email;
			delete userOptions.email;
			userOptions.emails = [{ address: email }];
		}

		var password = "";
		if(userOptions.password) {
			password = userOptions.password;
			delete userOptions.password;
		}

		if(userOptions) {
			Users.update(userId, { $set: userOptions });
		}

		if(password) {
			Accounts.setPassword(userId, password);
		}
	},

	"sendMail": function(options) {
		this.unblock();

		Email.send(options);
	}


});

Accounts.onCreateUser(function (options, user) {
	user.roles = [];

	if(options.profile) {
		user.profile = options.profile;
	}

	return user;
});

Accounts.validateLoginAttempt(function(info) {

	// reject users with role "blocked"
	if(info.user && Users.isInRole(info.user._id, "blocked")) {
		throw new Meteor.Error(403, "Your account is blocked.");
	}

	return true;
});


Users.before.insert(function(userId, doc) {
	if(doc.emails && doc.emails[0] && doc.emails[0].address) {
		doc.profile = doc.profile || {};
		doc.profile.email = doc.emails[0].address;
	}
});

Users.before.update(function(userId, doc, fieldNames, modifier, options) {
	if(modifier.$set && modifier.$set.emails && modifier.$set.emails.length && modifier.$set.emails[0].address) {
		modifier.$set.profile.email = modifier.$set.emails[0].address;
	}
});

Accounts.onLogin(function (info) {
	
});

Accounts.urls.resetPassword = function (token) {
	return Meteor.absoluteUrl('reset_password/' + token);
};
